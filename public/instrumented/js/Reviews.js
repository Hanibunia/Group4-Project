function cov_ttkec5qol(){var path="C:\\Users\\cleme\\Documents\\DVOPS_Projects\\Project\\Group4-Project\\public\\js\\Reviews.js";var hash="bd4c426e3e7f5a31b086f0d268b15387fa12cfe8";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\cleme\\Documents\\DVOPS_Projects\\Project\\Group4-Project\\public\\js\\Reviews.js",statementMap:{"0":{start:{line:4,column:26},end:{line:4,column:55}},"1":{start:{line:5,column:4},end:{line:5,column:48}},"2":{start:{line:7,column:4},end:{line:11,column:5}},"3":{start:{line:7,column:17},end:{line:7,column:18}},"4":{start:{line:8,column:25},end:{line:8,column:52}},"5":{start:{line:9,column:8},end:{line:9,column:77}},"6":{start:{line:10,column:8},end:{line:10,column:44}},"7":{start:{line:13,column:4},end:{line:13,column:25}},"8":{start:{line:17,column:21},end:{line:17,column:48}},"9":{start:{line:18,column:4},end:{line:18,column:58}},"10":{start:{line:19,column:4},end:{line:19,column:20}},"11":{start:{line:23,column:23},end:{line:23,column:50}},"12":{start:{line:24,column:4},end:{line:24,column:67}},"13":{start:{line:25,column:4},end:{line:25,column:22}},"14":{start:{line:30,column:25},end:{line:30,column:48}},"15":{start:{line:124,column:4},end:{line:159,column:5}},"16":{start:{line:125,column:29},end:{line:125,column:60}},"17":{start:{line:127,column:8},end:{line:127,column:51}},"18":{start:{line:128,column:8},end:{line:128,column:37}},"19":{start:{line:129,column:8},end:{line:129,column:48}},"20":{start:{line:130,column:8},end:{line:130,column:39}},"21":{start:{line:131,column:8},end:{line:131,column:52}},"22":{start:{line:133,column:25},end:{line:144,column:10}},"23":{start:{line:146,column:8},end:{line:146,column:50}},"24":{start:{line:158,column:8},end:{line:158,column:51}},"25":{start:{line:163,column:4},end:{line:181,column:5}},"26":{start:{line:164,column:25},end:{line:164,column:83}},"27":{start:{line:165,column:21},end:{line:165,column:42}},"28":{start:{line:179,column:8},end:{line:179,column:51}},"29":{start:{line:180,column:8},end:{line:180,column:20}},"30":{start:{line:184,column:4},end:{line:215,column:5}},"31":{start:{line:185,column:29},end:{line:185,column:60}},"32":{start:{line:187,column:8},end:{line:187,column:64}},"33":{start:{line:188,column:8},end:{line:188,column:37}},"34":{start:{line:189,column:8},end:{line:189,column:44}},"35":{start:{line:190,column:8},end:{line:190,column:48}},"36":{start:{line:191,column:8},end:{line:191,column:39}},"37":{start:{line:192,column:8},end:{line:192,column:52}},"38":{start:{line:193,column:25},end:{line:205,column:10}},"39":{start:{line:214,column:8},end:{line:214,column:51}},"40":{start:{line:219,column:35},end:{line:219,column:79}},"41":{start:{line:220,column:31},end:{line:220,column:71}},"42":{start:{line:223,column:4},end:{line:223,column:53}},"43":{start:{line:224,column:4},end:{line:224,column:45}},"44":{start:{line:227,column:4},end:{line:227,column:62}},"45":{start:{line:228,column:4},end:{line:228,column:56}},"46":{start:{line:231,column:4},end:{line:231,column:42}},"47":{start:{line:235,column:24},end:{line:235,column:79}},"48":{start:{line:237,column:4},end:{line:274,column:5}},"49":{start:{line:240,column:8},end:{line:270,column:15}},"50":{start:{line:252,column:16},end:{line:265,column:17}},"51":{start:{line:254,column:20},end:{line:254,column:63}},"52":{start:{line:257,column:49},end:{line:257,column:94}},"53":{start:{line:258,column:20},end:{line:261,column:21}},"54":{start:{line:259,column:24},end:{line:259,column:54}},"55":{start:{line:264,column:20},end:{line:264,column:61}},"56":{start:{line:265,column:18},end:{line:265,column:43}},"57":{start:{line:269,column:16},end:{line:269,column:63}},"58":{start:{line:273,column:8},end:{line:273,column:41}}},fnMap:{"0":{name:"createRatingStars",decl:{start:{line:3,column:9},end:{line:3,column:26}},loc:{start:{line:3,column:35},end:{line:14,column:1}},line:3},"1":{name:"createEditIcon",decl:{start:{line:16,column:9},end:{line:16,column:23}},loc:{start:{line:16,column:26},end:{line:20,column:1}},line:16},"2":{name:"createDeleteIcon",decl:{start:{line:22,column:9},end:{line:22,column:25}},loc:{start:{line:22,column:28},end:{line:26,column:1}},line:22},"3":{name:"showReviews",decl:{start:{line:29,column:9},end:{line:29,column:20}},loc:{start:{line:29,column:33},end:{line:120,column:1}},line:29},"4":{name:"addReview",decl:{start:{line:123,column:15},end:{line:123,column:24}},loc:{start:{line:123,column:52},end:{line:160,column:1}},line:123},"5":{name:"getSelectedRestaurantId",decl:{start:{line:162,column:15},end:{line:162,column:38}},loc:{start:{line:162,column:41},end:{line:182,column:1}},line:162},"6":{name:"updateReview",decl:{start:{line:183,column:15},end:{line:183,column:27}},loc:{start:{line:183,column:65},end:{line:216,column:1}},line:183},"7":{name:"openUpdateReviewModal",decl:{start:{line:217,column:9},end:{line:217,column:30}},loc:{start:{line:217,column:39},end:{line:232,column:1}},line:217},"8":{name:"confirmAndDeleteReview",decl:{start:{line:233,column:9},end:{line:233,column:31}},loc:{start:{line:233,column:53},end:{line:275,column:1}},line:233},"9":{name:"(anonymous_9)",decl:{start:{line:251,column:18},end:{line:251,column:19}},loc:{start:{line:251,column:30},end:{line:266,column:13}},line:251},"10":{name:"(anonymous_10)",decl:{start:{line:267,column:19},end:{line:267,column:20}},loc:{start:{line:267,column:28},end:{line:270,column:13}},line:267}},branchMap:{"0":{loc:{start:{line:9,column:48},end:{line:9,column:75}},type:"cond-expr",locations:[{start:{line:9,column:62},end:{line:9,column:67}},{start:{line:9,column:70},end:{line:9,column:75}}],line:9},"1":{loc:{start:{line:237,column:4},end:{line:274,column:5}},type:"if",locations:[{start:{line:237,column:4},end:{line:274,column:5}},{start:{line:237,column:4},end:{line:274,column:5}}],line:237},"2":{loc:{start:{line:252,column:16},end:{line:265,column:17}},type:"if",locations:[{start:{line:252,column:16},end:{line:265,column:17}},{start:{line:252,column:16},end:{line:265,column:17}}],line:252},"3":{loc:{start:{line:258,column:20},end:{line:261,column:21}},type:"if",locations:[{start:{line:258,column:20},end:{line:261,column:21}},{start:{line:258,column:20},end:{line:261,column:21}}],line:258}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bd4c426e3e7f5a31b086f0d268b15387fa12cfe8"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_ttkec5qol=function(){return actualCoverage;};}return actualCoverage;}cov_ttkec5qol();// Function to create star icons based on the rating
function createRatingStars(rating){cov_ttkec5qol().f[0]++;const starContainer=(cov_ttkec5qol().s[0]++,document.createElement('div'));cov_ttkec5qol().s[1]++;starContainer.classList.add('rating-stars');cov_ttkec5qol().s[2]++;for(let i=(cov_ttkec5qol().s[3]++,1);i<=5;i++){const starIcon=(cov_ttkec5qol().s[4]++,document.createElement('i'));cov_ttkec5qol().s[5]++;starIcon.classList.add('fa','fa-star',i<=rating?(cov_ttkec5qol().b[0][0]++,'fas'):(cov_ttkec5qol().b[0][1]++,'far'));// Change 'filled' to 'fas'
cov_ttkec5qol().s[6]++;starContainer.appendChild(starIcon);}cov_ttkec5qol().s[7]++;return starContainer;}// Function to create an "Edit" icon
function createEditIcon(){cov_ttkec5qol().f[1]++;const editIcon=(cov_ttkec5qol().s[8]++,document.createElement('i'));cov_ttkec5qol().s[9]++;editIcon.classList.add('fas','fa-edit','edit-icon');cov_ttkec5qol().s[10]++;return editIcon;}// creating delete icon
function createDeleteIcon(){cov_ttkec5qol().f[2]++;const deleteIcon=(cov_ttkec5qol().s[11]++,document.createElement('i'));cov_ttkec5qol().s[12]++;deleteIcon.classList.add('fas','fa-trash-alt','delete-icon');cov_ttkec5qol().s[13]++;return deleteIcon;}// Update the showReviews function
function showReviews(restaurant){cov_ttkec5qol().f[3]++;const restaurantId=(cov_ttkec5qol().s[14]++,restaurant.restaurantId);// Check if the restaurantId is defined before making the fetch request
/* istanbul ignore next */if(restaurantId){// Fetch reviews data for the selected restaurant
fetch(`/viewReviewbyRestaurant/${restaurantId}`).then(response=>response.json()).then(reviews=>{const reviewsModalBody=document.getElementById('reviewsModalBody');reviewsModalBody.innerHTML='';// Clear existing content
// Check if 'reviews' is an array and has at least one review
if(Array.isArray(reviews)&&reviews.length>0){// Loop through the reviews and create HTML elements for each
reviews.forEach(review=>{const reviewContainer=document.createElement('div');reviewContainer.classList.add('review-container');// Create a div for the profile picture
const profilePicture=document.createElement('div');profilePicture.classList.add('profile-picture');// Create an image element for the blank avatar
const avatarImg=document.createElement('img');avatarImg.src='./images/blank.jpg';avatarImg.alt='Blank Avatar';profilePicture.appendChild(avatarImg);// Create a div for the review content
const reviewContent=document.createElement('div');reviewContent.classList.add('review-content');// Populate the review content with the review text
const reviewText=document.createElement('p');reviewText.textContent=review.reviewText;reviewContent.appendChild(reviewText);// Create a div for the email
const emailDiv=document.createElement('div');emailDiv.classList.add('email');emailDiv.textContent=review.email;// Create a div for the rating stars
const rating=parseInt(review.rating);const ratingStars=createRatingStars(rating);// Append the profile picture, review content, email, and rating stars to the review container
reviewContainer.appendChild(profilePicture);reviewContainer.appendChild(reviewContent);reviewContainer.appendChild(emailDiv);reviewContainer.appendChild(ratingStars);// Check if the user is logged in (check for the existence of 'user' in session storage)
// Check if the user is logged in
const loggedInUser=JSON.parse(localStorage.getItem('user'));// Check if the review was created by the logged-in user
if(loggedInUser&&loggedInUser.email===review.email){// User is logged in and the review belongs to them, show the "Edit" icon
const editIcon=createEditIcon();editIcon.addEventListener('click',()=>openUpdateReviewModal(review));// If user is logged in, show the "Delete" icon
const deleteIcon=createDeleteIcon();deleteIcon.addEventListener('click',()=>confirmAndDeleteReview({reviewId:review.reviewId,email:review.email}));// Create a container div for the icons
const iconsContainer=document.createElement('div');iconsContainer.classList.add('icons-container');// Append the icons to the container
iconsContainer.appendChild(editIcon);iconsContainer.appendChild(deleteIcon);// Append the container to the reviewContainer
reviewContainer.appendChild(iconsContainer);}// Append the review container to the reviews modal body
reviewsModalBody.appendChild(reviewContainer);});}// Show the reviews modal
$('#reviewsModal').modal('show');}).catch(error=>console.error('An error occurred:',error));}else{console.error('Invalid restaurant object: Missing restaurantId property');}}async function addReview(email,reviewText,rating){cov_ttkec5qol().f[4]++;cov_ttkec5qol().s[15]++;try{const restaurantId=(cov_ttkec5qol().s[16]++,await getSelectedRestaurantId());// Add 'await' here
cov_ttkec5qol().s[17]++;console.log('Posting the following data:');cov_ttkec5qol().s[18]++;console.log('Email:',email);cov_ttkec5qol().s[19]++;console.log('Review Text:',reviewText);cov_ttkec5qol().s[20]++;console.log('Rating:',rating);cov_ttkec5qol().s[21]++;console.log('Restaurant ID:',restaurantId);const response=(cov_ttkec5qol().s[22]++,await fetch('/addReview',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,reviewText,rating,restaurantId})}));cov_ttkec5qol().s[23]++;console.log('Server Response:',response);/* istanbul ignore next */if(response.ok){showReviews({restaurantId});// Review successfully added, reload the reviews for the selected restaurant
$('#addReviewModal').modal('hide');// Close the modal
}else{// Handle errors
console.error('Failed to add review:',response.statusText);}}catch(error){cov_ttkec5qol().s[24]++;console.error('An error occurred:',error);}}async function getSelectedRestaurantId(){cov_ttkec5qol().f[5]++;cov_ttkec5qol().s[25]++;try{const response=(cov_ttkec5qol().s[26]++,await fetch(`/viewRestaurantById/${selectedRestaurantId}`));const data=(cov_ttkec5qol().s[27]++,await response.json());/* istanbul ignore next */if(response.ok){// Parse the restaurantId as an integer
const restaurantId=parseInt(data.restaurantId,10);console.log('Parsed Restaurant ID:',restaurantId);return restaurantId;}else{console.error('Failed to get selected restaurant ID:',data.message);return null;// Return null or handle the error accordingly
}}catch(error){cov_ttkec5qol().s[28]++;console.error('An error occurred:',error);cov_ttkec5qol().s[29]++;return null;// Return null or handle the error accordingly
}}async function updateReview(email,reviewId,reviewText,rating){cov_ttkec5qol().f[6]++;cov_ttkec5qol().s[30]++;try{const restaurantId=(cov_ttkec5qol().s[31]++,await getSelectedRestaurantId());cov_ttkec5qol().s[32]++;console.log('Updating review with the following data:');cov_ttkec5qol().s[33]++;console.log('Email:',email);cov_ttkec5qol().s[34]++;console.log('Review ID:',reviewId);cov_ttkec5qol().s[35]++;console.log('Review Text:',reviewText);cov_ttkec5qol().s[36]++;console.log('Rating:',rating);cov_ttkec5qol().s[37]++;console.log('Restaurant ID:',restaurantId);const response=(cov_ttkec5qol().s[38]++,await fetch('/updateReview',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,reviewId,reviewText,rating,restaurantId})}));/* istanbul ignore next */if(response.ok){showReviews({restaurantId});$('#updateReviewModal').modal('hide');}else{console.error('Failed to update review:',response.statusText);}}catch(error){cov_ttkec5qol().s[39]++;console.error('An error occurred:',error);}}function openUpdateReviewModal(review){cov_ttkec5qol().f[7]++;// Assuming you have fields in the update review modal with IDs like 'updatedReviewText' and 'updatedRating'
const updatedReviewTextInput=(cov_ttkec5qol().s[40]++,document.getElementById('updatedReviewText'));const updatedRatingInput=(cov_ttkec5qol().s[41]++,document.getElementById('updatedRating'));// Populate the modal fields with the existing review details
cov_ttkec5qol().s[42]++;updatedReviewTextInput.value=review.reviewText;cov_ttkec5qol().s[43]++;updatedRatingInput.value=review.rating;// Store the review ID and email in data attributes of the modal
cov_ttkec5qol().s[44]++;$('#updateReviewModal').data('reviewId',review.reviewId);cov_ttkec5qol().s[45]++;$('#updateReviewModal').data('email',review.email);// Open the update review modal
cov_ttkec5qol().s[46]++;$('#updateReviewModal').modal('show');}function confirmAndDeleteReview({reviewId,email}){cov_ttkec5qol().f[8]++;// show popout
const isConfirmed=(cov_ttkec5qol().s[47]++,confirm("Are you sure you want to delete this review?"));cov_ttkec5qol().s[48]++;if(isConfirmed){cov_ttkec5qol().b[1][0]++;cov_ttkec5qol().s[49]++;// if user confirms
fetch('/deleteReview',{method:'DELETE',headers:{'Content-Type':'application/json'},// user have to input both email and reviewId to delete review
body:JSON.stringify({email,reviewId})}).then(response=>{cov_ttkec5qol().f[9]++;cov_ttkec5qol().s[50]++;if(response.ok){cov_ttkec5qol().b[2][0]++;cov_ttkec5qol().s[51]++;// review deleted successfully
console.log('Review deleted successfully');// update the UI by removing the deleted review
const deletedReviewElement=(cov_ttkec5qol().s[52]++,document.getElementById(`review-${reviewId}`));cov_ttkec5qol().s[53]++;if(deletedReviewElement){cov_ttkec5qol().b[3][0]++;cov_ttkec5qol().s[54]++;deletedReviewElement.remove();}else{cov_ttkec5qol().b[3][1]++;}}else{cov_ttkec5qol().b[2][1]++;cov_ttkec5qol().s[55]++;// Handle error response from the server
console.error('Failed to delete review');}cov_ttkec5qol().s[56]++;window.location.reload();}).catch(error=>{cov_ttkec5qol().f[10]++;cov_ttkec5qol().s[57]++;// Handle network errors or other issues
console.error('Error deleting review:',error);});}else{cov_ttkec5qol().b[1][1]++;cov_ttkec5qol().s[58]++;// User canceled the deletion
console.log('Deletion canceled');}}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfdHRrZWM1cW9sIiwiYWN0dWFsQ292ZXJhZ2UiLCJjcmVhdGVSYXRpbmdTdGFycyIsInJhdGluZyIsImYiLCJzdGFyQ29udGFpbmVyIiwicyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImkiLCJzdGFySWNvbiIsImIiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUVkaXRJY29uIiwiZWRpdEljb24iLCJjcmVhdGVEZWxldGVJY29uIiwiZGVsZXRlSWNvbiIsInNob3dSZXZpZXdzIiwicmVzdGF1cmFudCIsInJlc3RhdXJhbnRJZCIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsInJldmlld3MiLCJyZXZpZXdzTW9kYWxCb2R5IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJmb3JFYWNoIiwicmV2aWV3IiwicmV2aWV3Q29udGFpbmVyIiwicHJvZmlsZVBpY3R1cmUiLCJhdmF0YXJJbWciLCJzcmMiLCJhbHQiLCJyZXZpZXdDb250ZW50IiwicmV2aWV3VGV4dCIsInRleHRDb250ZW50IiwiZW1haWxEaXYiLCJlbWFpbCIsInBhcnNlSW50IiwicmF0aW5nU3RhcnMiLCJsb2dnZWRJblVzZXIiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9wZW5VcGRhdGVSZXZpZXdNb2RhbCIsImNvbmZpcm1BbmREZWxldGVSZXZpZXciLCJyZXZpZXdJZCIsImljb25zQ29udGFpbmVyIiwiJCIsIm1vZGFsIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJhZGRSZXZpZXciLCJnZXRTZWxlY3RlZFJlc3RhdXJhbnRJZCIsImxvZyIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5Iiwic3RyaW5naWZ5Iiwib2siLCJzdGF0dXNUZXh0Iiwic2VsZWN0ZWRSZXN0YXVyYW50SWQiLCJkYXRhIiwibWVzc2FnZSIsInVwZGF0ZVJldmlldyIsInVwZGF0ZWRSZXZpZXdUZXh0SW5wdXQiLCJ1cGRhdGVkUmF0aW5nSW5wdXQiLCJ2YWx1ZSIsImlzQ29uZmlybWVkIiwiY29uZmlybSIsImRlbGV0ZWRSZXZpZXdFbGVtZW50IiwicmVtb3ZlIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiXSwic291cmNlcyI6WyJSZXZpZXdzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSBzdGFyIGljb25zIGJhc2VkIG9uIHRoZSByYXRpbmdcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVJhdGluZ1N0YXJzKHJhdGluZykge1xyXG4gICAgY29uc3Qgc3RhckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgc3RhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdyYXRpbmctc3RhcnMnKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA1OyBpKyspIHtcclxuICAgICAgICBjb25zdCBzdGFySWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcclxuICAgICAgICBzdGFySWNvbi5jbGFzc0xpc3QuYWRkKCdmYScsICdmYS1zdGFyJywgaSA8PSByYXRpbmcgPyAnZmFzJyA6ICdmYXInKTsgLy8gQ2hhbmdlICdmaWxsZWQnIHRvICdmYXMnXHJcbiAgICAgICAgc3RhckNvbnRhaW5lci5hcHBlbmRDaGlsZChzdGFySWNvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHN0YXJDb250YWluZXI7XHJcbn1cclxuLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGFuIFwiRWRpdFwiIGljb25cclxuZnVuY3Rpb24gY3JlYXRlRWRpdEljb24oKSB7XHJcbiAgICBjb25zdCBlZGl0SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcclxuICAgIGVkaXRJY29uLmNsYXNzTGlzdC5hZGQoJ2ZhcycsICdmYS1lZGl0JywgJ2VkaXQtaWNvbicpO1xyXG4gICAgcmV0dXJuIGVkaXRJY29uO1xyXG59XHJcbi8vIGNyZWF0aW5nIGRlbGV0ZSBpY29uXHJcbmZ1bmN0aW9uIGNyZWF0ZURlbGV0ZUljb24oKSB7XHJcbiAgICBjb25zdCBkZWxldGVJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xyXG4gICAgZGVsZXRlSWNvbi5jbGFzc0xpc3QuYWRkKCdmYXMnLCAnZmEtdHJhc2gtYWx0JywgJ2RlbGV0ZS1pY29uJyk7XHJcbiAgICByZXR1cm4gZGVsZXRlSWNvbjtcclxufVxyXG5cclxuLy8gVXBkYXRlIHRoZSBzaG93UmV2aWV3cyBmdW5jdGlvblxyXG5mdW5jdGlvbiBzaG93UmV2aWV3cyhyZXN0YXVyYW50KSB7XHJcbiAgICBjb25zdCByZXN0YXVyYW50SWQgPSByZXN0YXVyYW50LnJlc3RhdXJhbnRJZDtcclxuXHJcbiAgICAvLyBDaGVjayBpZiB0aGUgcmVzdGF1cmFudElkIGlzIGRlZmluZWQgYmVmb3JlIG1ha2luZyB0aGUgZmV0Y2ggcmVxdWVzdFxyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgIGlmIChyZXN0YXVyYW50SWQpIHtcclxuICAgICAgICAvLyBGZXRjaCByZXZpZXdzIGRhdGEgZm9yIHRoZSBzZWxlY3RlZCByZXN0YXVyYW50XHJcbiAgICAgICAgZmV0Y2goYC92aWV3UmV2aWV3YnlSZXN0YXVyYW50LyR7cmVzdGF1cmFudElkfWApXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4ocmV2aWV3cyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXZpZXdzTW9kYWxCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3NNb2RhbEJvZHknKTtcclxuICAgICAgICAgICAgICAgIHJldmlld3NNb2RhbEJvZHkuaW5uZXJIVE1MID0gJyc7IC8vIENsZWFyIGV4aXN0aW5nIGNvbnRlbnRcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiAncmV2aWV3cycgaXMgYW4gYXJyYXkgYW5kIGhhcyBhdCBsZWFzdCBvbmUgcmV2aWV3XHJcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXZpZXdzKSAmJiByZXZpZXdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggdGhlIHJldmlld3MgYW5kIGNyZWF0ZSBIVE1MIGVsZW1lbnRzIGZvciBlYWNoXHJcbiAgICAgICAgICAgICAgICAgICAgcmV2aWV3cy5mb3JFYWNoKHJldmlldyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmlld0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdDb250YWluZXIuY2xhc3NMaXN0LmFkZCgncmV2aWV3LWNvbnRhaW5lcicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgZGl2IGZvciB0aGUgcHJvZmlsZSBwaWN0dXJlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2ZpbGVQaWN0dXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGVQaWN0dXJlLmNsYXNzTGlzdC5hZGQoJ3Byb2ZpbGUtcGljdHVyZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuIGltYWdlIGVsZW1lbnQgZm9yIHRoZSBibGFuayBhdmF0YXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXZhdGFySW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF2YXRhckltZy5zcmMgPSAnLi9pbWFnZXMvYmxhbmsuanBnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXZhdGFySW1nLmFsdCA9ICdCbGFuayBBdmF0YXInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlUGljdHVyZS5hcHBlbmRDaGlsZChhdmF0YXJJbWcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgZGl2IGZvciB0aGUgcmV2aWV3IGNvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2aWV3Q29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdDb250ZW50LmNsYXNzTGlzdC5hZGQoJ3Jldmlldy1jb250ZW50Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSB0aGUgcmV2aWV3IGNvbnRlbnQgd2l0aCB0aGUgcmV2aWV3IHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2aWV3VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV2aWV3VGV4dC50ZXh0Q29udGVudCA9IHJldmlldy5yZXZpZXdUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdDb250ZW50LmFwcGVuZENoaWxkKHJldmlld1RleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgZGl2IGZvciB0aGUgZW1haWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1haWxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWxEaXYuY2xhc3NMaXN0LmFkZCgnZW1haWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWxEaXYudGV4dENvbnRlbnQgPSByZXZpZXcuZW1haWw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBkaXYgZm9yIHRoZSByYXRpbmcgc3RhcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF0aW5nID0gcGFyc2VJbnQocmV2aWV3LnJhdGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhdGluZ1N0YXJzID0gY3JlYXRlUmF0aW5nU3RhcnMocmF0aW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgcHJvZmlsZSBwaWN0dXJlLCByZXZpZXcgY29udGVudCwgZW1haWwsIGFuZCByYXRpbmcgc3RhcnMgdG8gdGhlIHJldmlldyBjb250YWluZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV2aWV3Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2ZpbGVQaWN0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV2aWV3Q29udGFpbmVyLmFwcGVuZENoaWxkKHJldmlld0NvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdDb250YWluZXIuYXBwZW5kQ2hpbGQoZW1haWxEaXYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdDb250YWluZXIuYXBwZW5kQ2hpbGQocmF0aW5nU3RhcnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHVzZXIgaXMgbG9nZ2VkIGluIChjaGVjayBmb3IgdGhlIGV4aXN0ZW5jZSBvZiAndXNlcicgaW4gc2Vzc2lvbiBzdG9yYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgdXNlciBpcyBsb2dnZWQgaW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nZ2VkSW5Vc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSByZXZpZXcgd2FzIGNyZWF0ZWQgYnkgdGhlIGxvZ2dlZC1pbiB1c2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2dnZWRJblVzZXIgJiYgbG9nZ2VkSW5Vc2VyLmVtYWlsID09PSByZXZpZXcuZW1haWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZXIgaXMgbG9nZ2VkIGluIGFuZCB0aGUgcmV2aWV3IGJlbG9uZ3MgdG8gdGhlbSwgc2hvdyB0aGUgXCJFZGl0XCIgaWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWRpdEljb24gPSBjcmVhdGVFZGl0SWNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdEljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBvcGVuVXBkYXRlUmV2aWV3TW9kYWwocmV2aWV3KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdXNlciBpcyBsb2dnZWQgaW4sIHNob3cgdGhlIFwiRGVsZXRlXCIgaWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlSWNvbiA9IGNyZWF0ZURlbGV0ZUljb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjb25maXJtQW5kRGVsZXRlUmV2aWV3KHsgcmV2aWV3SWQ6IHJldmlldy5yZXZpZXdJZCwgZW1haWw6IHJldmlldy5lbWFpbCB9KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgY29udGFpbmVyIGRpdiBmb3IgdGhlIGljb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpY29uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbnNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaWNvbnMtY29udGFpbmVyJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBwZW5kIHRoZSBpY29ucyB0byB0aGUgY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChlZGl0SWNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChkZWxldGVJY29uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgdGhlIGNvbnRhaW5lciB0byB0aGUgcmV2aWV3Q29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdDb250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbnNDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgdGhlIHJldmlldyBjb250YWluZXIgdG8gdGhlIHJldmlld3MgbW9kYWwgYm9keVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdzTW9kYWxCb2R5LmFwcGVuZENoaWxkKHJldmlld0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBTaG93IHRoZSByZXZpZXdzIG1vZGFsXHJcbiAgICAgICAgICAgICAgICAkKCcjcmV2aWV3c01vZGFsJykubW9kYWwoJ3Nob3cnKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoJ0FuIGVycm9yIG9jY3VycmVkOicsIGVycm9yKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgcmVzdGF1cmFudCBvYmplY3Q6IE1pc3NpbmcgcmVzdGF1cmFudElkIHByb3BlcnR5Jyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5hc3luYyBmdW5jdGlvbiBhZGRSZXZpZXcoZW1haWwsIHJldmlld1RleHQsIHJhdGluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN0YXVyYW50SWQgPSBhd2FpdCBnZXRTZWxlY3RlZFJlc3RhdXJhbnRJZCgpOyAvLyBBZGQgJ2F3YWl0JyBoZXJlXHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdQb3N0aW5nIHRoZSBmb2xsb3dpbmcgZGF0YTonKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnRW1haWw6JywgZW1haWwpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdSZXZpZXcgVGV4dDonLCByZXZpZXdUZXh0KTtcclxuICAgICAgICBjb25zb2xlLmxvZygnUmF0aW5nOicsIHJhdGluZyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1Jlc3RhdXJhbnQgSUQ6JywgcmVzdGF1cmFudElkKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FkZFJldmlldycsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICAgICAgICByZXZpZXdUZXh0LFxyXG4gICAgICAgICAgICAgICAgcmF0aW5nLFxyXG4gICAgICAgICAgICAgICAgcmVzdGF1cmFudElkLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlciBSZXNwb25zZTonLCByZXNwb25zZSk7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgc2hvd1Jldmlld3MoeyByZXN0YXVyYW50SWQgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZXZpZXcgc3VjY2Vzc2Z1bGx5IGFkZGVkLCByZWxvYWQgdGhlIHJldmlld3MgZm9yIHRoZSBzZWxlY3RlZCByZXN0YXVyYW50XHJcbiAgICAgICAgICAgICQoJyNhZGRSZXZpZXdNb2RhbCcpLm1vZGFsKCdoaWRlJyk7IC8vIENsb3NlIHRoZSBtb2RhbFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEhhbmRsZSBlcnJvcnNcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGFkZCByZXZpZXc6JywgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdBbiBlcnJvciBvY2N1cnJlZDonLCBlcnJvcik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFNlbGVjdGVkUmVzdGF1cmFudElkKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvdmlld1Jlc3RhdXJhbnRCeUlkLyR7c2VsZWN0ZWRSZXN0YXVyYW50SWR9YCk7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgLy8gUGFyc2UgdGhlIHJlc3RhdXJhbnRJZCBhcyBhbiBpbnRlZ2VyXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3RhdXJhbnRJZCA9IHBhcnNlSW50KGRhdGEucmVzdGF1cmFudElkLCAxMCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQYXJzZWQgUmVzdGF1cmFudCBJRDonLCByZXN0YXVyYW50SWQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3RhdXJhbnRJZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHNlbGVjdGVkIHJlc3RhdXJhbnQgSUQ6JywgZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIG9yIGhhbmRsZSB0aGUgZXJyb3IgYWNjb3JkaW5nbHlcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FuIGVycm9yIG9jY3VycmVkOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gbnVsbDsgLy8gUmV0dXJuIG51bGwgb3IgaGFuZGxlIHRoZSBlcnJvciBhY2NvcmRpbmdseVxyXG4gICAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVJldmlldyhlbWFpbCwgcmV2aWV3SWQsIHJldmlld1RleHQsIHJhdGluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN0YXVyYW50SWQgPSBhd2FpdCBnZXRTZWxlY3RlZFJlc3RhdXJhbnRJZCgpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRpbmcgcmV2aWV3IHdpdGggdGhlIGZvbGxvd2luZyBkYXRhOicpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdFbWFpbDonLCBlbWFpbCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1JldmlldyBJRDonLCByZXZpZXdJZCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1JldmlldyBUZXh0OicsIHJldmlld1RleHQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdSYXRpbmc6JywgcmF0aW5nKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnUmVzdGF1cmFudCBJRDonLCByZXN0YXVyYW50SWQpO1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy91cGRhdGVSZXZpZXcnLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICAgICAgICByZXZpZXdJZCxcclxuICAgICAgICAgICAgICAgIHJldmlld1RleHQsXHJcbiAgICAgICAgICAgICAgICByYXRpbmcsXHJcbiAgICAgICAgICAgICAgICByZXN0YXVyYW50SWQsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgIHNob3dSZXZpZXdzKHsgcmVzdGF1cmFudElkIH0pO1xyXG4gICAgICAgICAgICAkKCcjdXBkYXRlUmV2aWV3TW9kYWwnKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgcmV2aWV3OicsIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignQW4gZXJyb3Igb2NjdXJyZWQ6JywgZXJyb3IpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIG9wZW5VcGRhdGVSZXZpZXdNb2RhbChyZXZpZXcpIHtcclxuICAgIC8vIEFzc3VtaW5nIHlvdSBoYXZlIGZpZWxkcyBpbiB0aGUgdXBkYXRlIHJldmlldyBtb2RhbCB3aXRoIElEcyBsaWtlICd1cGRhdGVkUmV2aWV3VGV4dCcgYW5kICd1cGRhdGVkUmF0aW5nJ1xyXG4gICAgY29uc3QgdXBkYXRlZFJldmlld1RleHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGRhdGVkUmV2aWV3VGV4dCcpO1xyXG4gICAgY29uc3QgdXBkYXRlZFJhdGluZ0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwZGF0ZWRSYXRpbmcnKTtcclxuXHJcbiAgICAvLyBQb3B1bGF0ZSB0aGUgbW9kYWwgZmllbGRzIHdpdGggdGhlIGV4aXN0aW5nIHJldmlldyBkZXRhaWxzXHJcbiAgICB1cGRhdGVkUmV2aWV3VGV4dElucHV0LnZhbHVlID0gcmV2aWV3LnJldmlld1RleHQ7XHJcbiAgICB1cGRhdGVkUmF0aW5nSW5wdXQudmFsdWUgPSByZXZpZXcucmF0aW5nO1xyXG5cclxuICAgIC8vIFN0b3JlIHRoZSByZXZpZXcgSUQgYW5kIGVtYWlsIGluIGRhdGEgYXR0cmlidXRlcyBvZiB0aGUgbW9kYWxcclxuICAgICQoJyN1cGRhdGVSZXZpZXdNb2RhbCcpLmRhdGEoJ3Jldmlld0lkJywgcmV2aWV3LnJldmlld0lkKTtcclxuICAgICQoJyN1cGRhdGVSZXZpZXdNb2RhbCcpLmRhdGEoJ2VtYWlsJywgcmV2aWV3LmVtYWlsKTtcclxuXHJcbiAgICAvLyBPcGVuIHRoZSB1cGRhdGUgcmV2aWV3IG1vZGFsXHJcbiAgICAkKCcjdXBkYXRlUmV2aWV3TW9kYWwnKS5tb2RhbCgnc2hvdycpO1xyXG59XHJcbmZ1bmN0aW9uIGNvbmZpcm1BbmREZWxldGVSZXZpZXcoeyByZXZpZXdJZCwgZW1haWwgfSkge1xyXG4gICAgLy8gc2hvdyBwb3BvdXRcclxuICAgIGNvbnN0IGlzQ29uZmlybWVkID0gY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyByZXZpZXc/XCIpO1xyXG5cclxuICAgIGlmIChpc0NvbmZpcm1lZCkge1xyXG4gICAgICAgIC8vIGlmIHVzZXIgY29uZmlybXNcclxuICAgICBcclxuICAgICAgICBmZXRjaCgnL2RlbGV0ZVJldmlldycsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gdXNlciBoYXZlIHRvIGlucHV0IGJvdGggZW1haWwgYW5kIHJldmlld0lkIHRvIGRlbGV0ZSByZXZpZXdcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICAgICAgICByZXZpZXdJZFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXZpZXcgZGVsZXRlZCBzdWNjZXNzZnVsbHlcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmV2aWV3IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgVUkgYnkgcmVtb3ZpbmcgdGhlIGRlbGV0ZWQgcmV2aWV3XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlZFJldmlld0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcmV2aWV3LSR7cmV2aWV3SWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGV0ZWRSZXZpZXdFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRSZXZpZXdFbGVtZW50LnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBlcnJvciByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIHJldmlldycpO1xyXG4gICAgICAgICAgICAgICAgfSB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbmV0d29yayBlcnJvcnMgb3Igb3RoZXIgaXNzdWVzXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyByZXZpZXc6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gVXNlciBjYW5jZWxlZCB0aGUgZGVsZXRpb25cclxuICAgICAgICBjb25zb2xlLmxvZygnRGVsZXRpb24gY2FuY2VsZWQnKTtcclxuICAgIH1cclxufSJdLCJtYXBwaW5ncyI6InM0TkFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWjtBQUVBLFFBQVMsQ0FBQUUsaUJBQWlCQSxDQUFDQyxNQUFNLENBQUUsQ0FBQUgsYUFBQSxHQUFBSSxDQUFBLE1BQy9CLEtBQU0sQ0FBQUMsYUFBYSxFQUFBTCxhQUFBLEdBQUFNLENBQUEsTUFBR0MsUUFBUSxDQUFDQyxhQUFhLENBQUMsS0FBSyxDQUFDLEVBQUNSLGFBQUEsR0FBQU0sQ0FBQSxNQUNwREQsYUFBYSxDQUFDSSxTQUFTLENBQUNDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQ1YsYUFBQSxHQUFBTSxDQUFB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